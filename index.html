<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QUIKRETE Project Selector</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    /* ✅ Fix: global box sizing (had typos + was inside :root) */
    *, *::before, *::after { box-sizing: border-box; }

    :root {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;

      /* Quikrete theme tokens */
      --q-yellow: #facc15;
      --q-yellow-2: #eab308;
      --q-black: #0b0b0b;

      /* Fullscreen yellow/black background */
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(250,204,21,0.18), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(250,204,21,0.10), transparent 50%),
        var(--q-black);

      color: #f9fafb;
    }

    body {
      margin: 0;
      padding: 0;              /* FULL SCREEN */
      min-height: 100vh;
      display: block;          /* remove centered boxing */
      background: transparent; /* let :root show through */
    }

    .app {
      width: 100%;             /* ✅ Fix: needs % */
      min-height: 100vh;       /* ✅ Safer than height:100vh on mobile Safari */
      max-width: 100%;         /* ✅ Fix: needs % */
      border-radius: 0;        /* full-bleed */
      border: 0;
      box-shadow: none;
      padding: 2.25rem 1.25rem 3rem;

      /* dark panel */
      background: linear-gradient(180deg, rgba(17,24,39,0.96), rgba(15,23,42,0.96));
    }

    @media (min-width: 768px) {
      .card--best { 
        transform: scale(1.03); 
      }
    }

    h1 {
      margin: 0 0 0.35rem;
      font-size: 1.55rem;
      font-weight: 600;
      letter-spacing: 0.01em;
      color: #f9fafb;
    }

    .subtitle {
      margin: 0 0 1.9rem;
      font-size: 0.95rem;
      color: rgba(249, 250, 251, 0.72);
      max-width: 40rem;
    }
    .subtitle strong { color: var(--q-yellow); }

    .form-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      margin-bottom: 2rem;
    }

    @media (min-width: 640px) {
      .form-row { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    label {
      display: block;
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: rgba(250, 204, 21, 0.92);
      margin-bottom: 0.4rem;
    }

    select {
      width: 100%;
      padding: 0.6rem 0.7rem;
      border-radius: 0.5rem;
      border: 1px solid rgba(250,204,21,0.22);
      background: rgba(0,0,0,0.35);
      font-size: 0.95rem;
      color: #f9fafb;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    select:focus {
      outline: none;
      border-color: var(--q-yellow-2);
      box-shadow: 0 0 0 2px rgba(250,204,21,0.25);
      background: rgba(0,0,0,0.25);
    }

    .hint {
      font-size: 0.78rem;
      color: rgba(249,250,251,0.55);
      margin-top: 0.25rem;
    }

    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 0.9rem;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.25rem;
    }

    .logo {
      height: 120px;
      width: auto;
      display: block;
    }
    
    .results-title {
      font-size: 1.05rem;
      font-weight: 600;
      color: #f9fafb;
    }

    .results-selection {
      font-size: 0.85rem;
      color: rgba(249,250,251,0.62);
    }

    .cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      margin-top: 0.6rem;
    }

    @media (min-width: 768px) {
      .cards { grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }

    .card {
      border-radius: 0.7rem;
      padding: 1rem;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.22);
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      position: relative;

      /* ✅ Fix: prevents Safari “paint slab” artifacts */
      overflow: hidden;

      /* keep blur effect where Safari behaves (desktop/tablet) */
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
    }

    /* ✅ UPDATED: “Technical Data Sheet” + “Safety Data Sheet” links (top-right, stacked) */
    .datasheet-links {
      position: absolute;
      top: 12px;
      right: 14px;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
      z-index: 2;
      text-align: right;
    }

    .datasheet-links a {
      font-size: 0.8rem;
      font-weight: 600;
      color: var(--q-yellow);
      text-decoration: none;
      opacity: 0.9;
      white-space: nowrap;
    }

    .datasheet-links a:hover {
      text-decoration: underline;
      opacity: 1;
    }

    /* Make it readable on the light BEST card */
    .card--best .datasheet-links a {
      color: #166534;
    }

    /* GOOD */
    .card--good {
      border: 2px solid #ea580c; /* orange */
    }

    /* BETTER */
    .card--better {
      border: 2px solid #2563eb; /* blue */
    }

    /* BEST (premium) */
    .card--best {
      border: 2px solid #16a34a;
      background: #f0fdf4; 
      box-shadow: 0 18px 45px rgba(22, 163, 74, 0.22);
    }

    @media (min-width: 768px) {
      .card--best {
        box-shadow: none;
        transform: scale(1.03);
        transform-origin: center;
        z-index: 5;
      }
    }

    .card-pill {
      display: inline-flex;
      align-items: center;
      padding: 0.18rem 0.6rem;
      border-radius: 999px;
      font-size: 0.7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      background: #111827;
      color: var(--q-yellow);
      align-self: flex-start;
      border: 1px solid rgba(250,204,21,0.25);
    }

    .card--best .card-pill { background: #166534; color: #f9fafb; border: 0; }

    .card-title {
      font-size: 0.98rem;
      font-weight: 600;
      color: #f9fafb;
    }

    .card--best .card-title {
      font-family: ui-serif, Georgia, "Times New Roman", serif;
      font-size: 1.08rem;
      letter-spacing: 0.01em;
      color: #111827; /* best card background is light */
    }

    .card-code {
      font-size: 0.8rem;
      font-weight: 500;
      color: rgba(249,250,251,0.62);
    }

    .card--best .card-code { color: #6b7280; }

    .card-notes {
      font-size: 0.8rem;
      color: rgba(249,250,251,0.74);
      margin-top: 0.25rem;
      line-height: 1.4;
    }

    .card--best .card-notes { color: #4b5563; }

    .empty-state {
      border-radius: 0.7rem;
      padding: 1rem;
      border: 1px dashed rgba(250,204,21,0.35);
      background: rgba(0,0,0,0.22);
      font-size: 0.86rem;
      color: rgba(249,250,251,0.70);
      margin-top: 0.9rem;
      line-height: 1.45;
    }

    .empty-state strong { color: var(--q-yellow); font-weight: 600; }

    /* Tech Services callout = "Best" vibe (KEEP as-is) */
    .empty-state.callout {
      border: 2px solid #16a34a;
      background: #f0fdf4;
      box-shadow: 0 18px 45px rgba(22, 163, 74, 0.22);
    }

    .empty-state.callout strong {
      color: #166534;
    }

    /* ✅ mobile fix: disable backdrop blur on iOS phone widths */
    @media (max-width: 767px) {
      .card {
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
      }
      .card--best {
        box-shadow: none !important;
      }
    }
  </style>
</head>

<body>
  <main class="app">
    <div class="header">
      <img src="QK.png" alt="QUIKRETE" class="logo" />
      <div class="header-text">
        <h1>Project Selector</h1>
        <p class="subtitle">
          Choose a project type and repair size to see a simple
          <strong>Good / Better / Best</strong> recommendation.
        </p>
      </div>
    </div>

    <section aria-label="Project selection">
      <div class="form-row">
        <div>
          <label for="projectType">Project type</label>
          <select id="projectType">
            <option value="">— Select project type —</option>
            <option value="concrete">Concrete Installation</option>
            <option value="brick">Brick Installation</option>
            <option value="CMU">Concrete Block Installation</option>
            <option value="mortar-joint">Mortar Joint Repair</option>
            <option value="crack">Concrete Crack Repair</option>
            <option value="surface">Concrete Repair (spalls / surface)</option>
            <option value="leveler">Floor Leveling</option>
          </select>
          <p class="hint">Example: tuckpointing, hairline cracks, shallow spalls, etc.</p>
        </div>

        <div>
          <label for="repairSize">Repair size / depth</label>
          <select id="repairSize">
            <option value="">— Select size / depth —</option>
            <option value="0.25">Up to 1/4"</option>
            <option value="0.375">Up to 3/8"</option>
            <option value="0.5">Up to 1/2"</option>
            <option value="1">Up to 1"</option>
            <option value="2">Up to 2"</option>
            <option value="over2">Over 2"</option>
          </select>
          <p class="hint">Match the deepest part of the repair.</p>
        </div>
      </div>
    </section>

    <section aria-label="Recommendations">
      <div class="results-header">
        <div class="results-title">Recommended materials</div>
        <div class="results-selection" id="currentSelection">
          Select a project and size to see options.
        </div>
      </div>

      <div id="cardsContainer" class="cards" aria-live="polite"></div>
      <div id="emptyState" class="empty-state">
        <strong>No selection yet.</strong> Pick a project type and repair size to see
        the Good / Better / Best materials.
      </div>
    </section>
  </main>

  <script>
    // ------------------------------
    // 1. Data (base, specific combos)
    // ------------------------------
    const recommendations = {
      // Mortar joint repair
      "mortar-joint|0.25": {
        good: { label: "Good", name: "QUIKRETE® Mason Mix Type S", code: "#1136",
          notes: "Higher strength mix for structural or load-bearing masonry joints.",
          datasheet: "https://www.quikrete.com/pdfs/data_sheet-mason%20mix%201136.pdf",
          sds: "https://www.quikrete.com/pdfs/sds-c4-masonry-mortars.pdf"
            },
        better: { label: "Better", name: "QUIKRETE® Advanced Polymer Mortar Joint Sealant", code: "#8620-18",
          notes: "High performance caulk-style material that seals and waterproofs joints.",
            datasheet: "https://www.quikrete.com/pdfs/data_sheet-advanced%20polymer%20mortar%20joint%20sealant%20862018.pdf",
            sds: "https://www.quikrete.com/pdfs/sds-j7b-advanced-polymer-concrete-crack-&-mortar-joint.pdf"
                },
        best: { label: "Best", name: "QUIKRETE® Mortar Repair", code: "#8620-09",
          notes: "Caulk-style repair for small mortar joint cracks and minor tuckpointing.",
            datasheet: "https://www.quikrete.com/pdfs/data_sheet-mortar%20repair%208620.pdf",
            sds: "https://www.quikrete.com/pdfs/sds-a12-repair-tubes.pdf"
              }
      },

      "mortar-joint|0.375": {
        good: { label: "Good", name: "QUIKRETE® Mason Mix Type S", code: "#1136",
          notes: "Higher strength mix for structural or load-bearing masonry joints.", 
          datasheet: "https://www.quikrete.com/pdfs/data_sheet-mason%20mix%201136.pdf",
          sds: "https://www.quikrete.com/pdfs/sds-c4-masonry-mortars.pdf" },
        better: { label: "Better", name: "QUIKRETE® Advanced Polymer Mortar Joint Sealant", code: "#8620-18",
          notes: "High performance caulk-style material that seals and waterproofs joints.",
            datasheet: "https://www.quikrete.com/pdfs/data_sheet-advanced%20polymer%20mortar%20joint%20sealant%20862018.pdf",
            sds: "https://www.quikrete.com/pdfs/sds-j7b-advanced-polymer-concrete-crack-&-mortar-joint.pdf"},
        best: { label: "Best", name: "QUIKRETE® Mortar Repair", code: "#8620-09",
          notes: "Caulk-style repair for small mortar joint cracks and minor tuckpointing.",
              datasheet: "https://www.quikrete.com/pdfs/data_sheet-mortar%20repair%208620.pdf",
            sds: "https://www.quikrete.com/pdfs/sds-a12-repair-tubes.pdf"
              }
      },

      "mortar-joint|0.5": {
        good: { label: "Good", name: "QUIKRETE® Mortar Repair", code: "#8620",
          notes: "Caulk-style repair for small mortar joint cracks and minor tuckpointing. Maximum 3/8\" application at a time. Another layer can be applied after 4 hours." },
        better: { label: "Better", name: "QUIKRETE® Mortar Mix", code: "#1102",
          notes: "Cement and sand mix for joints for more durable repairs; shape and tool to match existing joints." },
        best: { label: "Best", name: "QUIKRETE® Mason Mix Type S", code: "#1136",
          notes: "Higher strength mix for structural or load-bearing masonry joints.",
          datasheet: "https://www.quikrete.com/pdfs/data_sheet-mason%20mix%201136.pdf",
          sds: "https://www.quikrete.com/pdfs/sds-c4-masonry-mortars.pdf" 
              }
      },

      "mortar-joint|1": { message: "<strong>Mortar joint repair • Up to 1\"</strong><br/>For further assistance please call 1-800-282-5828." },
      "mortar-joint|2": { message: "<strong>Mortar joint repair • Up to 2\"</strong><br/>For further assistance please call 1-800-282-5828." },
      "mortar-joint|over2": { message: "<strong>Mortar joint repair • Over 2\"</strong><br/>For further assistance please call 1-800-282-5828." },

      // Crack repair
      "crack|0.25": {
        good: { label: "Good", name: "QUIKRETE® Concrete Crack Seal", code: "#8640",
          notes: "Flowable crack sealer for hairline to small cracks in concrete slabs." },
        better: { label: "Better", name: "QUIKRETE® Advanced Polymer Concrete Crack Sealant", code: "#8660",
          notes: "Flexible, long-lasting sealant for active or moving cracks up to 1/2\"." },
        best: { label: "Best", name: "QUIKRETE® Epoxy Concrete Repair", code: "Epoxy",
          notes: "Two-component epoxy for maximum bond and chemical resistance in narrow cracks." }
      },
      "crack|0.375": {
        good: { label: "Good", name: "QUIKRETE® Concrete Crack Seal", code: "#8640",
          notes: "Flowable crack sealer for hairline to small cracks in concrete slabs." },
        better: { label: "Better", name: "QUIKRETE® Advanced Polymer Concrete Crack Sealant", code: "#8660",
          notes: "Flexible, long-lasting sealant for active or moving cracks up to 1/2\"." },
        best: { label: "Best", name: "QUIKRETE® Epoxy Concrete Repair", code: "Epoxy",
          notes: "Two-component epoxy for maximum bond and chemical resistance in narrow cracks." }
      },
      "crack|0.5": {
        good: { label: "Good", name: "QUIKRETE® Concrete Crack Seal", code: "#8640",
          notes: "Flowable crack sealer for hairline to small cracks in concrete slabs." },
        better: { label: "Better", name: "QUIKRETE® Advanced Polymer Concrete Crack Sealant", code: "#8660",
          notesnotes: "Flexible, long-lasting sealant for active or moving cracks up to 1/2\"." },
        best: { label: "Best", name: "QUIKRETE® Epoxy Concrete Repair", code: "Epoxy",
          notes: "Two-component epoxy for maximum bond and chemical resistance in narrow cracks." }
      },
      "crack|1": {
        good: { label: "Good", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Use for concrete repair of steps, slabs and any concrete horizontal surface between 3/8\" to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "crack|2": {
        good: { label: "Good", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Use for concrete repair of steps, slabs and any concrete horizontal surface between 3/8\" to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },

      // Surface repair
      "surface|0.25": {
        good: { label: "Good", name: "QUIKRETE® Vinyl Concrete Patcher", code: "#1133",
          notes: "General-purpose patch for spalls and shallow repairs up to 1/4\" deep." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "surface|0.375": {
        good: { label: "Good", name: "QUIKRETE® Fast Set Repair Mortar", code: "#1241",
          notes: "General-purpose fast setting patch for spalls and shallow repairs up to 2\" deep." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "surface|0.5": {
        good: { label: "Good", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Use for concrete repair of steps, slabs and any concrete horizontal surface between 3/8\" to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "surface|1": {
        good: { label: "Good", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Use for concrete repair of steps, slabs and any concrete horizontal surface between 3/8\" to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "surface|2": {
        good: { label: "Good", name: "QUIKRETE® Sand/Topping Mix", code: "#1103",
          notes: "Use for concrete repair of steps, slabs and any concrete horizontal surface between 3/8\" to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Quick Setting Cement", code: "#1240",
          notes: "Quick setting patch for spalls and shallow repairs from feather edge to 2\" deep." },
        best: { label: "Best", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep." }
      },
      "surface|over2": {
        good: { label: "Good", name: "QUIKRETE® Polymer Modified Structural Repair", code: "#1241",
          notes: "Quick setting polymer modified patch for spalls and shallow repairs from feather edge to 2\" deep. Repairs can be done over 2\" deep in lifts of 2\" at a time with 4 hours in between lifts." },
        better: { label: "Better", name: "QUIKRETE® FastSet™ Concrete Mix", code: "#1004",
          notes: "Fast-setting, high-strength concrete where downtime must be minimized." },
        best: { label: "Best", name: "QUIKRETE® High Strength™ Concrete Mix", code: "#1101",
          notes: "Standard 4,000 psi mix for full-depth slab and structural repairs." }
      },

      // Leveling
      "leveler|0.25": {
        good: { label: "Good", name: "QUIKRETE® Self Leveling Floor Resurfacer", code: "#1249-50",
          notes: "Self Leveling Floor Resurfacer that can go between feather edge and 5/8\" thick. Cannot be used as a finished flooring surface." },
        better: { label: "Better", name: "QUIKRETE® Fast Setting Self Leveling Floor Resurfacer", code: "#1249-51",
          notes: "Fast Setting Self Leveling Floor Resurfacer that can go between feather edge and 1.5\" thick. Can be used as a finished flooring surface." },
        best: { label: "Best", name: "QUIKRETE® Re-Cap", code: "#1131",
          notes: "Re-Cap Concrete Resurfacer is designed to provide a new, durable, and wear-resistant surface over worn or scaled concrete." }
      },
      "leveler|0.375": {
        good: { label: "Good", name: "QUIKRETE® Self Leveling Floor Resurfacer", code: "#1249-50",
          notes: "Self Leveling Floor Resurfacer that can go between feather edge and 5/8\" thick. Cannot be used as a finished flooring surface." },
        better: { label: "Better", name: "QUIKRETE® Fast Setting Self Leveling Floor Resurfacer", code: "#1249-51",
          notes: "Fast Setting Self Leveling Floor Resurfacer that can go between feather edge and 1.5\" thick. Can be used as a finished flooring surface." },
        best: { label: "Best", name: "QUIKRETE® Re-Cap", code: "#1131",
          notes: "Re-Cap Concrete Resurfacer is designed to provide a new, durable, and wear-resistant surface over worn or scaled concrete." }
      },
      "leveler|0.5": {
        good: { label: "Good", name: "QUIKRETE® Self Leveling Floor Resurfacer", code: "#1249-50",
          notes: "Self Leveling Floor Resurfacer that can go between feather edge and 5/8\" thick. Cannot be used as a finished flooring surface." },
        better: { label: "Better", name: "QUIKRETE® Fast Setting Self Leveling Floor Resurfacer", code: "#1249-51",
          notes: "Fast Setting Self Leveling Floor Resurfacer that can go between feather edge and 1.5\" thick. Can be used as a finished flooring surface." },
        best: { label: "Best", name: "QUIKRETE® Re-Cap", code: "#1131",
          notes: "Re-Cap Concrete Resurfacer is designed to provide a new, durable, and wear-resistant surface over worn or scaled concrete." }
      },
      "leveler|1": {
        good: { label: "Good", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Sand Topping Mix is designed to be used as a for repairing and topping concrete surfaces up to 2\" thick." },
        better: { label: "Better", name: "QUIKRETE® Re-Cap", code: "#1131-47",
          notes: "Re-Cap Concrete Resurfacer is designed to provide a new, durable, and wear-resistant surface over worn or scaled concrete. When applying at 1 inch thick you must do two half inch applications" },
        best: { label: "Best", name: "QUIKRETE® Fast Setting Self Leveling Floor Resurfacer", code: "#1249-51",
          notes: "Fast Setting Self Leveling Floor Resurfacer that can go between feather edge and 1.5\" thick. Can be used as a finished flooring surface." }
      },
      "leveler|2": {
        better: { label: "Better", name: "QUIKRETE® Sand Topping Mix", code: "#1103",
          notes: "Sand Topping Mix is designed to be used as a for repairing and topping concrete surfaces up to 2\" thick." },
        best: { label: "Best", name: "QUIKRETE® Fast Setting Self Leveling Floor Resurfacer", code: "#1249-51",
          notes: "Fast Setting Self Leveling Floor Resurfacer that can go between feather edge and 1.5\" thick. Can be used as a finished flooring surface." }
      }
    };

    function applyCallForAssistance(projects, sizes) {
      projects.forEach(project => {
        sizes.forEach(size => {
          recommendations[`${project}|${size}`] = {
            message:
              "<strong>Further assistance required.</strong><br/>Please call Technical Services at: <strong>1-800-282-5828</strong>"
          };
        });
      });
    }

    applyCallForAssistance(["concrete"], ["0.25", "0.375", "0.5", "1"]);
    applyCallForAssistance(["brick"], ["2", "over2"]);
    applyCallForAssistance(["CMU"], ["2", "over2"]);
    applyCallForAssistance(["mortar-joint"], ["1", "2", "over2"]);
    applyCallForAssistance(["crack"], ["over2"]);
    applyCallForAssistance(["leveler"], ["over2"]);

    function applyCombo(projectTypes, sizes, combo) {
      projectTypes.forEach(p => sizes.forEach(s => {
        recommendations[`${p}|${s}`] = combo;
      }));
    }

    // ✅ UPDATED: Q Max Pro now includes BOTH links (datasheet + sds)
    const COMBO_CONCRETE_1101_5000_QMAX = {
      good: {
        label: "Good",
        name: "QUIKRETE® High Strength Concrete Mix",
        code: "#1101",
        notes: "4000 PSI concrete mix suitable for interior and exterior applications that is a pre-blended mixture of sand, cement and gravel.",
        datasheet: "https://www.quikrete.com/pdfs/data_sheet-concrete%20mix%201101.pdf",
        sds: "https://www.quikrete.com/pdfs/sds-c1-concretes.pdf"
      },
      better: {
        label: "Better",
        name: "QUIKRETE® 5000",
        code: "#1007",
        notes: "5000 PSI high early strength gain concrete mix that is a pre-blended mixture of sand, cement and gravel.",
        datasheet: "https://www.quikrete.com/pdfs/data_sheet-quikrete%205000%201007.pdf",
        sds: "https://www.quikrete.com/pdfs/sds-c1-concretes.pdf"
      },
      best: {
        label: "Best",
        name: "QUIKRETE® Q Max Pro",
        code: "#1004",
        notes: "6500 PSI concrete that is air entrained and also contains a corrosion inhibitor and is a pre-blended mixture of sand, cement and gravel.",
        datasheet: "https://www.quikrete.com/pdfs/data_sheet-qmax-pro-1004-81.pdf",
        sds: "https://www.quikrete.com/pdfs/sds-c6-fast-setting-products.pdf"
      }
    };

    applyCombo(["concrete"], ["2", "over2"], COMBO_CONCRETE_1101_5000_QMAX);

    const COMBO_CMU_MORTAR_1102_MASON_1136 = {
      better: { label: "Better", name: "QUIKRETE® Mortar Mix", code: "#1102",
        notes: "Cement and sand mix only to be used above grade and in non-structural applications",
          datasheet: "https://www.quikrete.com/pdfs/data_sheet-mortar%20mix%201102.pdf",
          sds: "https://www.quikrete.com/pdfs/sds-c4-masonry-mortars.pdf"
              },
      best: { label: "Best", name: "QUIKRETE® Mason Mix Type S", code: "#1136",
        notes: "Higher strength mix with the addition of lime for structural or load-bearing masonry joints and can also be used below grade.",
            datasheet: "https://www.quikrete.com/pdfs/data_sheet-mason%20mix%201136.pdf",
          sds: "https://www.quikrete.com/pdfs/sds-c4-masonry-mortars.pdf"
            }
    };

    applyCombo(["CMU", "brick"], ["0.25", "0.375", "0.5", "1"], COMBO_CMU_MORTAR_1102_MASON_1136);

    const projectSelect = document.getElementById("projectType");
    const sizeSelect = document.getElementById("repairSize");
    const cardsContainer = document.getElementById("cardsContainer");
    const emptyState = document.getElementById("emptyState");
    const currentSelection = document.getElementById("currentSelection");

    function updateSelectionLabel() {
      const projectText = projectSelect.options[projectSelect.selectedIndex]?.text || "";
      const sizeText = sizeSelect.options[sizeSelect.selectedIndex]?.text || "";

      if (!projectSelect.value && !sizeSelect.value) {
        currentSelection.textContent = "Select a project and size to see options.";
        return;
      }

      const parts = [];
      if (projectSelect.value) parts.push(projectText);
      if (sizeSelect.value) parts.push(sizeText);
      currentSelection.textContent = parts.join(" • ");
    }

    function renderRecommendations() {
      const key = `${projectSelect.value}|${sizeSelect.value}`;
      const combo = recommendations[key];

      emptyState.classList.remove("callout");

      if (!projectSelect.value || !sizeSelect.value) {
        cardsContainer.innerHTML = "";
        emptyState.style.display = "block";
        emptyState.innerHTML =
          "<strong>No selection yet.</strong> Pick a project type and repair size to see the Good / Better / Best materials.";
        updateSelectionLabel();
        return;
      }

      if (!combo) {
        cardsContainer.innerHTML = "";
        emptyState.style.display = "block";
        emptyState.innerHTML =
          "<strong>No recommendations configured yet for this combo.</strong><br />You can add it to the <code>recommendations</code> object in the script.";
        updateSelectionLabel();
        return;
      }

      if (!combo.good && !combo.better && !combo.best && combo.message) {
        cardsContainer.innerHTML = "";
        emptyState.style.display = "block";
        emptyState.classList.add("callout");
        emptyState.innerHTML = combo.message;
        updateSelectionLabel();
        return;
      }

      emptyState.style.display = "none";
      cardsContainer.innerHTML = "";

      const tiers = [
        { key: "good", css: "card--good" },
        { key: "better", css: "card--better" },
        { key: "best", css: "card--best" }
      ];

      tiers.forEach(tier => {
        const data = combo[tier.key];
        if (!data) return;

        const card = document.createElement("article");
        card.className = `card ${tier.css}`;

        const pill = document.createElement("div");
        pill.className = "card-pill";
        pill.textContent = data.label;

        // ✅ UPDATED: show stacked “Technical Data Sheet” + “Safety Data Sheet” (if provided)
        if (data.datasheet || data.sds) {
          const linksWrap = document.createElement("div");
          linksWrap.className = "datasheet-links";

          if (data.datasheet) {
            const tech = document.createElement("a");
            tech.href = data.datasheet;
            tech.target = "_blank";
            tech.rel = "noopener noreferrer";
            tech.textContent = "Technical Data Sheet";
            linksWrap.appendChild(tech);
          }

          if (data.sds) {
            const sds = document.createElement("a");
            sds.href = data.sds;
            sds.target = "_blank";
            sds.rel = "noopener noreferrer";
            sds.textContent = "Safety Data Sheet";
            linksWrap.appendChild(sds);
          }

          card.appendChild(linksWrap);
        }

        const title = document.createElement("div");
        title.className = "card-title";
        title.textContent = data.name;

        const code = document.createElement("div");
        code.className = "card-code";
        code.textContent = data.code ? `Product code: ${data.code}` : "Product code: —";

        const notes = document.createElement("div");
        notes.className = "card-notes";
        notes.textContent = data.notes || "";

        card.appendChild(pill);
        card.appendChild(title);
        card.appendChild(code);
        card.appendChild(notes);

        cardsContainer.appendChild(card);
      });

      updateSelectionLabel();
    }

    projectSelect.addEventListener("change", renderRecommendations);
    sizeSelect.addEventListener("change", renderRecommendations);
    renderRecommendations();
  </script>
</body>
</html>
